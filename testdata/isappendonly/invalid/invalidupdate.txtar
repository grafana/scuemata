# an updated lineage that updates an existing schema

#firstLin: lin1
#secondLin: lin2
-- in.cue --
import "github.com/grafana/thema"

lin1: thema.#Lineage
lin1: name: "maps"
lin1: schemas: [{
	version: [0, 0]
	schema: {
		firstfield: string
	}
}]

lin2: thema.#Lineage
lin2: name: "lineage"
lin2: schemas: [{
    version: [0, 0]
    schema: {
        firstfield: string
        secondfield: int32
    }
}]
-- out/isappendonly-fail --
field schema not present in {version:[0,0],schema:{firstfield:string},_join(github.com/grafana/thema):_,_#schema(github.com/grafana/thema):{firstfield:string},_schemaIsNonEmpty(github.com/grafana/thema):{firstfield:string}}:
    ../../../lineage.cue:41:12
    ./in.cue:5:17
missing field "schema"
required field is optional in subsumed value: secondfield
