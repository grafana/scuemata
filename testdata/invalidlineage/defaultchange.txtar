-- in.cue --

import "github.com/grafana/thema"

thema.#Lineage
name: "defaultchange"
schemas: [
    {
        version: [0, 0]
		schema: close({
		    aunion: *"foo" | "bar" | "baz"
        })
    },
    {
        version: [0, 1]
		schema: close({
		    aunion: "foo" | *"bar" | "baz"
        })
    },
]

lenses: [
    {
        to: [0, 0]
        from: [0, 1]
        input: _
        result: {
            aunion: input.aunion
        }
    },
]
-- out/bindfail --
not a lineage, missing #Lineage.name
(1) forced error mark
  | "not a lineage"
  | github.com/cockroachdb/errors/withstack/*withstack.withStack::
Wraps: (2) not a lineage, missing #Lineage.name
Error types: (1) *markers.withMark (2) *errors.errorString
