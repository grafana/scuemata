<html>
<head>
    <meta charset="utf-8"/>
    <script src="wasm_exec.js"></script>
    <script>
        const go = new Go();
        WebAssembly.instantiateStreaming(fetch("thema.wasm"), go.importObject).then((result) => {
            go.run(result.instance);
        });
    </script>
</head>
<body>
<p><input id="button" name="button" onclick="validateData(lineageInput.value, dataInput.value)" type="submit" value="Validate"/></p>

<p><label for="lineageInput">Input lineage path:</label></p>
<textarea cols="80" id="lineageInput" name="lineageInput" rows="5"></textarea>

<p><label for="dataInput">Input data to validate:</label></p>
<textarea cols="80" id="dataInput" name="dataInput" rows="20"></textarea>

<p><label for="output">Output:</label></p>
<textarea cols="80" id="output" name="output" rows="20"></textarea>

<script>
    var validateData = function(lineage, data) {
        var result = validate(lineage, '0.0', data)
        if (( result != null) && ('error' in result)) {
            console.log("Error from Go ", result)
            output.value = result.error
            // alert(result.error)
        }
    }
</script>
</body>
</html>
